# Octoparse LIPS Scraping Portfolio

※ 本リポジトリは **実案件を想定したスクレイピング設計のポートフォリオ**です。  
コードではなく、**Octoparse上での設計・運用に耐えるワークフロー構築**を成果物としています。

---

## 概要
LIPS（コスメ口コミサイト）において、以下の一連フローを **安定稼働前提で設計**しました。

- 最新投稿一覧 → 投稿詳細 → ユーザープロフィール → SNSリンク抽出
- 欠損（SNS未登録）は **空欄が正** として扱う
- 重複や取りこぼしが起きやすい構造を前提に **運用設計**まで落とし込む

---

## この設計で実現したこと（成果）
- 最新投稿一覧ページから投稿を複数件ループ処理
- 投稿詳細で以下を取得
  - 投稿日時
  - 投稿URL
  - ユーザーURL（プロフィール遷移用）
- ユーザープロフィールページで以下SNSリンクを抽出（登録がある場合のみ）
  - Instagram / X / YouTube / TikTok / Webサイト
- 「取得できない」の判定を設計に組み込み（= HTMLに存在しない場合は空欄）
- ページ遷移の待機（Delay）を明示し、動的描画でも取りこぼしを最小化

---

## 対象サイトの特性（難所）
- 投稿数が多く、一覧が高頻度更新される（重複・取りこぼしが起きやすい）
- 一覧 / 投稿詳細 / プロフィールでDOM構造が異なる
- 同一URLでも、読み込みタイミングにより取得可否が変動することがある
- SNSリンクは「未登録ならHTMLに存在しない」ため、無理に埋めると誤取得になる

---

## 再現方法（Octoparse）
詳細は `cases/lips.md` を参照。

- Entry: `https://lipscosme.com/posts?sort=latest`
- Loop: 投稿カード単位でループ（20件程度）
- Step:
  1. 投稿詳細へ遷移（クリック or URL遷移）
  2. 投稿日時・投稿URL・ユーザーURL取得
  3. ユーザープロフィールへ遷移
  4. SNSリンク抽出（存在する場合のみ）
- Pagination: 一覧ページを最大10ページ分処理（Nextボタン/URLでページング）

---

## データ定義（出力カラム）
例：
- post_url
- published_at
- user_url
- instagram_url
- x_url
- youtube_url
- tiktok_url
- website_url

欠損は空欄（NULL相当）とし、ダミー値で埋めない。

---

## 設計上のポイント
- クリック遷移とURL遷移を使い分け（認識が落ちるページを前提に設計）
- Delayを「根拠付きで」調整（動的描画対策）
- 取得対象を限定したXPathで誤取得を回避（公式アカウント等を拾わない）
- 重複排除のキー設計（post_url 等）を前提に運用できる形へ

---

## 免責・注意
- 本設計はサイト利用規約・robots.txt・法令を遵守した運用を前提とします。
- 取得データの公開や再配布、個人情報の取り扱いは利用規約に従ってください。

---

## Documents
- 設計仕様：`cases/lips.md`
- データ定義：`docs/data-schema.md`（任意）
- 設計判断ログ：`docs/design-decisions.md`（任意）
